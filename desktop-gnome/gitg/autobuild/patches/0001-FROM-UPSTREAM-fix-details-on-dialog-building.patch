From 5e8ef38a577bcee7562894c99d5536e34943388e Mon Sep 17 00:00:00 2001
From: Alberto Fanjul <albertofanjul@gmail.com>
Date: Tue, 2 Apr 2024 22:52:40 +0200
Subject: [PATCH 1/2] FROM UPSTREAM: fix details on dialog building

---
 gitg/commit/gitg-commit-dialog.vala   | 2 +-
 gitg/gitg-window.vala                 | 8 +++-----
 libgitg/gitg-repository-list-box.vala | 2 +-
 3 files changed, 5 insertions(+), 7 deletions(-)

diff --git a/gitg/commit/gitg-commit-dialog.vala b/gitg/commit/gitg-commit-dialog.vala
index cf57020ffaf3..9e36e72ef20a 100644
--- a/gitg/commit/gitg-commit-dialog.vala
+++ b/gitg/commit/gitg-commit-dialog.vala
@@ -939,7 +939,7 @@ class Dialog : Gtk.Dialog
 							try {
 								file.delete_async.end (res);
 							} catch (Error e) {
-								warning ("Error deleting %S file: %s", PREPARE_COMMIT_MSG_FILENAME, e.message);
+								warning ("Error deleting %s file: %s", PREPARE_COMMIT_MSG_FILENAME, e.message);
 							}
 						});
 					}
diff --git a/gitg/gitg-window.vala b/gitg/gitg-window.vala
index f77a7f56e0e7..bd33667883a6 100644
--- a/gitg/gitg-window.vala
+++ b/gitg/gitg-window.vala
@@ -1114,14 +1114,12 @@ public class Window : Gtk.ApplicationWindow, GitgExt.Application, Initable
 
 	public void user_query(GitgExt.UserQuery query)
 	{
-		var dlg = new Gtk.MessageDialog(this,
+		var dlg = new Gtk.MessageDialog.with_markup(this,
 		                                Gtk.DialogFlags.MODAL,
 		                                query.message_type,
 		                                Gtk.ButtonsType.NONE,
-		                                "");
-
-		var primary = "<b>%s</b>".printf(Markup.escape_text(query.title));
-		dlg.set_markup(primary);
+		                                "<b>%s</b>",
+		                                query.title);
 
 		dlg.format_secondary_text("%s", query.message);
 
diff --git a/libgitg/gitg-repository-list-box.vala b/libgitg/gitg-repository-list-box.vala
index 01bacbcab842..df545035f198 100644
--- a/libgitg/gitg-repository-list-box.vala
+++ b/libgitg/gitg-repository-list-box.vala
@@ -563,7 +563,7 @@ namespace Gitg
 		{
 			var alert_dialog = new Gtk.MessageDialog((Gtk.Window) row.get_toplevel(),
 					Gtk.DialogFlags.MODAL, Gtk.MessageType.ERROR, Gtk.ButtonsType.NONE,
-					_("Deleting repository source files “%s” will delete them from disk and cannot be undone. Are you sure?").printf(uri), null);
+					_("Deleting repository source files “%s” will delete them from disk and cannot be undone. Are you sure?"), uri);
 			alert_dialog.add_button(_("Cancel"), DeleteSources.CANCEL);
 			alert_dialog.add_button(_("Move to trash"), DeleteSources.TRASH);
 			alert_dialog.add_button(_("Delete permanently"), DeleteSources.DELETE);

base-commit: f41b818a9aeceb69480b8098109fa2c449e24879
-- 
2.46.0

