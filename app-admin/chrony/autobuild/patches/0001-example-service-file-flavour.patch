From 5f55c0b33d75c99068358a45e2c147c92a41f6ca Mon Sep 17 00:00:00 2001
From: Kexy Biscuit <kexybiscuit@aosc.io>
Date: Mon, 22 Jan 2024 16:47:15 +0800
Subject: [PATCH] example: service file flavour

---
 examples/chrony.conf.example3 | 10 +++++-----
 examples/chronyd.service      | 13 +++++++------
 2 files changed, 12 insertions(+), 11 deletions(-)

diff --git a/examples/chronyd.service b/examples/chronyd.service
index a42eb92..2018c5d 100644
--- a/examples/chronyd.service
+++ b/examples/chronyd.service
@@ -1,15 +1,15 @@
 [Unit]
-Description=NTP client/server
-Documentation=man:chronyd(8) man:chrony.conf(5)
-After=ntpdate.service sntp.service ntpd.service
-Conflicts=ntpd.service systemd-timesyncd.service
+Description=chrony, an NTP client/server
+Documentation=man:chronyd(8) man:chronyc(1) man:chrony.conf(5)
+After=network.target
+Conflicts=systemd-timesyncd.service
 ConditionCapability=CAP_SYS_TIME
 
 [Service]
 Type=forking
 PIDFile=/run/chrony/chronyd.pid
-EnvironmentFile=-/etc/sysconfig/chronyd
-ExecStart=/usr/sbin/chronyd $OPTIONS
+EnvironmentFile=-/etc/default/chronyd
+ExecStart=/usr/sbin/chronyd -u chrony $OPTIONS
 
 CapabilityBoundingSet=~CAP_AUDIT_CONTROL CAP_AUDIT_READ CAP_AUDIT_WRITE
 CapabilityBoundingSet=~CAP_BLOCK_SUSPEND CAP_KILL CAP_LEASE CAP_LINUX_IMMUTABLE
@@ -45,4 +45,5 @@ ReadWritePaths=-/var/spool
 RestrictAddressFamilies=AF_NETLINK
 
 [Install]
+Alias=chrony.service
 WantedBy=multi-user.target
-- 
2.43.0.windows.1

